int flash = 12;

int analogPin = 0;

int ldrWert = 0;

int schalter = 7;

int buttonState = LOW;

int x = 0;

int led = 13;
int led1= 10;
int led2=11;

#include <Stepper.h>
int steps = 2028;
Stepper stepper(steps, 2, 4, 3, 5);

void setup() {
  stepper.setSpeed(10);

  Serial.begin(9600);

  pinMode(flash, OUTPUT);
 
  pinMode(led, OUTPUT);
  pinMode(led1, OUTPUT);
  pinMode(led2, OUTPUT);

  pinMode(schalter, INPUT);


}

void loop() {

  digitalWrite(flash, HIGH);

  ldrWert = analogRead(analogPin);

  if (ldrWert < 550) {

    Serial.println("Post ist da!");

    delay(2000);

  }

  if (ldrWert > 550) {

    Serial.println("Leerer Karsten"); //leer

    delay(2000);

  }

  if (Serial.available() > 0) {

    x = Serial.read();

    if (x == '1') {

      digitalWrite(led, HIGH);
      stepper.step(200);
      delay(2000);

      buttonState = digitalRead(schalter);

      while (buttonState == LOW) {
        buttonState = digitalRead(schalter);
        delay(1000);
      }
      

      digitalWrite(led, LOW);
      stepper.step(-200);

      Serial.println("Briefkarsten wird geschlossen");
      delay(1000);
      }
    

    else if (x == '0') {

      digitalWrite(led, LOW);
      

    }
    else {

      Serial.println("invalid!");

    }

  }

}
